---

- name: Configure network devices
  hosts: a01-dev-rtr1
  gather_facts: false

  tasks:
    - name: Include configuration variables for {{ inventory_hostname }}
      ansible.builtin.include_vars:
        dir: "{{ config_vars }}"

    - debug:
        var: bgp.as

    - name: Apply configuration from SoT
      arista.eos.eos_config:
        src: "{{ config_template }}"
        # replace: config
        save_when: modified
      #   backup: "{{ eos_config_deploy_eapi_pre_running_config_backup }}"
      #   backup_options:
      #     filename: "{{ pre_running_config_backup_filename }}"
      #     dir_path: "{{ pre_running_config_backup_dir }}"
      # notify: "backup config"